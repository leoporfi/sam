# ===== CONFIGURACIÓN GENERAL SAM =====
# Convención de nombres: {SERVICIO}_{TEMA}_{ACCION}[_{UNIDAD}]

# --- Logging ---
LOG_DIRECTORIO=C:/RPA/Logs/SAM
LOG_NIVEL=INFO
LOG_FORMATO=%(asctime)s - PID:%(process)d - %(levelname)s - %(name)s - %(funcName)s - %(message)s
LOG_FECHA_FORMATO=%Y-%m-%d %H:%M:%S
LOG_BACKUP_CANTIDAD=7

# --- Archivos de log por servicio ---
LOG_ARCHIVO_LANZADOR=sam_lanzador_app.log
LOG_ARCHIVO_BALANCEADOR=sam_balanceador_app.log
LOG_ARCHIVO_CALLBACK=sam_callback_server.log
LOG_ARCHIVO_INTERFAZ_WEB=sam_interfaz_web.log

# --- Base de Datos SAM ---
SQL_SAM_DRIVER={ODBC Driver 17 for SQL Server}
SQL_SAM_HOST=127.0.0.1
SQL_SAM_BD_NOMBRE=SAM
SQL_SAM_USUARIO=usuario_sam
SQL_SAM_PASSWORD=password_sam
SQL_SAM_CONEXION_TIMEOUT_SEG=60
SQL_SAM_QUERY_REINTENTOS_MAX=3
SQL_SAM_QUERY_REINTENTO_DELAY_SEG=2
SQL_SAM_QUERY_SQLSTATE_REINTENTABLES=40001,HYT00,HYT01,08S01
SQL_SAM_POOL_TAMANO=10

# --- Base de Datos RPA360 ---
SQL_RPA360_DRIVER={ODBC Driver 17 for SQL Server}
SQL_RPA360_HOST=127.0.0.1
SQL_RPA360_BD_NOMBRE=RPA360
SQL_RPA360_USUARIO=usuario_rpa360
SQL_RPA360_PASSWORD=password_rpa360
SQL_RPA360_CONEXION_TIMEOUT_SEG=60
SQL_RPA360_QUERY_REINTENTOS_MAX=3
SQL_RPA360_QUERY_REINTENTO_DELAY_SEG=2
SQL_RPA360_POOL_TAMANO=5

# --- Automation Anywhere ---
AA_URL=https://controlroom.example.com
AA_USUARIO=usuario_aa
AA_API_KEY=api_key_aa
AA_PASSWORD=
AA_SSL_VERIFICAR=true
AA_API_TIMEOUT_SEG=200
AA_TOKEN_REFRESH_BUFFER_SEG=1140
AA_PAGINACION_TAMANO_DEFAULT=100
AA_PAGINACION_PAGINAS_MAX=1000
AA_CALLBACK_URL="https://callback.example.com/api/callback"

# --- Callback Server ---
CALLBACK_HOST=0.0.0.0
CALLBACK_PUERTO=8008
CALLBACK_THREADS=5
CALLBACK_ENDPOINT=/api/callback
CALLBACK_TOKEN=token_callback_seguro
CALLBACK_AUTH_MODO=optional
CALLBACK_HOST_PUBLICO=

# --- Email ---
EMAIL_SMTP_HOST=smtp.example.com
EMAIL_SMTP_PUERTO=25
EMAIL_REMITENTE=sam@example.com
EMAIL_DESTINATARIOS=admin@example.com;soporte@example.com
EMAIL_TLS_HABILITAR=False
EMAIL_USUARIO=
EMAIL_PASSWORD=

# --- Lanzador ---
# Ciclo principal
LANZADOR_CICLO_INTERVALO_SEG=15
LANZADOR_SHUTDOWN_TIMEOUT_SEG=60
LANZADOR_WORKERS_MAX=10

# Sincronización con A360
LANZADOR_SYNC_HABILITAR=false
LANZADOR_SYNC_INTERVALO_SEG=3600

# Conciliación de estados
LANZADOR_CONCILIACION_INTERVALO_SEG=300
LANZADOR_CONCILIACION_LOTE_TAMANO=50
LANZADOR_CONCILIACION_UNKNOWN_TOLERANCIA_DIAS=30
LANZADOR_CONCILIACION_INFERENCIA_MENSAJE="Finalizado (Inferido por ausencia en lista de activos)"
LANZADOR_CONCILIACION_INFERENCIA_MAX_INTENTOS=5

# Deploy de robots
LANZADOR_DEPLOY_REINTENTOS_MAX=2
LANZADOR_DEPLOY_REINTENTO_DELAY_SEG=5

# Configuración de robots
LANZADOR_ROBOT_REPETICIONES=3
LANZADOR_ROBOT_PARAMETROS_JSON={}

# Pausa diaria
LANZADOR_PAUSA_INICIO_HHMM=21:00
LANZADOR_PAUSA_FIN_HHMM=21:15

# Alertas
LANZADOR_ALERTAS_ERROR_412_UMBRAL=20

# --- Balanceador ---
# Ciclo principal
BALANCEADOR_CICLO_INTERVALO_SEG=120

# Pools
BALANCEADOR_POOL_ENFRIAMIENTO_SEG=300
BALANCEADOR_POOL_AISLAMIENTO_ESTRICTO=true
BALANCEADOR_PREEMPTION_HABILITAR=False

# Carga
BALANCEADOR_CARGA_PROVEEDORES=clouders,rpa360
BALANCEADOR_TICKETS_DEFAULT_POR_EQUIPO=15

# Mapeo de robots (JSON)
ROBOTS_MAPA_JSON={"ROBOT_KEY": "NombreRobotA360"}

# --- Clouders API ---
CLOUDERS_URL=https://api.clouders.example.com
CLOUDERS_AUTH=Basic token_base64
CLOUDERS_SSL_VERIFICAR=false
CLOUDERS_TIMEOUT_SEG=30

# --- Interfaz Web ---
# Servidor
INTERFAZ_WEB_HOST=127.0.0.1
INTERFAZ_WEB_PUERTO=8000
INTERFAZ_WEB_DEBUG=false
INTERFAZ_WEB_SESION_TIMEOUT_MIN=30
INTERFAZ_WEB_UPLOAD_MAX_MB=16

# Umbrales de ejecución
INTERFAZ_WEB_EJECUCION_DEMORA_UMBRAL_MIN=25
INTERFAZ_WEB_EJECUCION_UMBRAL_FACTOR=1.5
INTERFAZ_WEB_EJECUCION_UMBRAL_PISO_MIN=10
INTERFAZ_WEB_EJECUCION_FILTRO_CORTAS_MIN=2

# Credenciales A360 exclusivas para la Web (Evita conflicto de token con Lanzador)
INTERFAZ_WEB_AA_USUARIO=usuario_aa_web
INTERFAZ_WEB_AA_APIKEY=api_key_aa_web

# --- API Gateway ---
APIGW_URL=https://gateway.example.com/token
APIGW_CLIENT_ID=client_id_gw
APIGW_CLIENT_SECRET=client_secret_gw
APIGW_SCOPE=scope_gw
APIGW_GRANT_TYPE=client_credentials
APIGW_TIMEOUT_SEG=30
APIGW_TOKEN_BUFFER_SEG=300

# --- Auth Server ---
AUTH_HOST=0.0.0.0
AUTH_PUERTO=5001
APIGW_CLIENT_ID=client_id_auth
APIGW_CLIENT_SECRET=client_secret_auth

# --- JWT para SAM Callback ---
JWT_CLAVE_PUBLICA="placeholder_public_key"
JWT_CLAVE_PRIVADA="placeholder_private_key"

JWT_AUDIENCE="sam-callback-service"
JWT_ISSUER="sam-auth-server"
